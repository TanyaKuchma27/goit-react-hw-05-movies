{"version":3,"file":"static/js/899.5d8584e9.chunk.js","mappings":"sSAAMA,EAAW,+BACXC,EAAM,mCAAZ,SAEeC,IAAAA,OAAAA,EAAAA,MAAAA,KAAAA,WAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,2GAAsCC,EAAtC,+BAA4C,GAAIC,EAAhD,+BAAyD,GAAzD,SACyBC,MAAMF,EAAKC,GADpC,YACQE,EADR,QAEkBC,GAFlB,iCAGYD,EAASE,OAHrB,gDAIMC,QAAQC,OAAO,IAAIC,MAAM,cAJ/B,2GAOO,SAASC,IAEZ,OAAOV,EADO,UAAMF,EAAN,qCAA2CC,IAItD,SAASY,EAAkBC,GAE9B,OAAOZ,EADQ,UAAMF,EAAN,iCAAuCC,EAAvC,kBAAoDa,EAApD,YAIZ,SAASC,EAAeC,GAE3B,OAAOd,EADY,UAAMF,EAAN,kBAAwBgB,EAAxB,oBAA2Cf,IAI3D,SAASgB,EAAmBD,GAE/B,OAAOd,EADgB,UAAMF,EAAN,kBAAwBgB,EAAxB,4BAAmDf,IAIvE,SAASiB,EAAqBF,GAEjC,OAAOd,EADkB,UAAMF,EAAN,kBAAwBgB,EAAxB,4BAAmDf,M,kHC3BjE,SAASkB,IACtB,OAAoCC,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KACA,GAA4BF,EAAAA,EAAAA,UAAS,MAArC,eAAOG,EAAP,KAAeC,EAAf,KAEA,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KA0BA,OAPAC,EAAAA,EAAAA,YAAU,WACR,GAAkC,OAA9BF,EAAaG,IAAI,SAAmB,CACtC,IAAMC,EAAcJ,EAAaG,IAAI,SACrCE,EAAAA,GAA2BD,GAAaE,MAAK,SAAAC,GAAC,OAAIA,EAAEC,WAASF,KAAKR,MAEnE,CAACE,KAGF,iCACE,kBAAMS,SAhBW,SAAAC,GACnBA,EAAMC,iBAENN,EAAAA,GAA2BV,GAAYW,MAAK,SAAAC,GAAC,OAAIA,EAAEC,WAASF,KAAKR,GACjEF,EAAc,KAYZ,WACE,kBACEgB,KAAK,OACLC,KAAK,QACLC,MAAqC,OAA9Bd,EAAaG,IAAI,SAAoB,GAAKH,EAAaG,IAAI,SAClEY,SA/BkB,SAAAL,GACxBd,EAAcc,EAAMM,OAAOF,OAEA,KAAvBJ,EAAMM,OAAOF,MAIjBb,EAAgB,CAAEb,MAAOsB,EAAMM,OAAOF,QAHpCb,EAAgB,KA4BZgB,aAAa,MACbC,WAAS,EACTC,YAAY,kBAEd,mBAAQP,KAAK,SAAb,uBAGDf,IACC,wBACGA,EAAOuB,KAAI,SAAAC,GAAK,OACf,yBACE,SAAC,KAAD,CAAMC,GAAE,kBAAaD,EAAME,IAA3B,SAAkCF,EAAMG,OAASH,EAAMI,iBADhDJ,EAAME","sources":["services/movieAPI.js","views/MoviesPage.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst key = '276ded1fd3f5024715e6a06fff45ae5d';\n\nasync function fetchWithErrorHandling(url = '', config = {}) {\n  const response = await fetch(url, config);\n  return response.ok\n    ? await response.json()\n    : Promise.reject(new Error('Not found'));\n}\n\nexport function fetchTrendingMovies() {\n    const trendURL = `${BASE_URL}/trending/all/day?api_key=${key}`;\n    return fetchWithErrorHandling(trendURL);\n}\n\nexport function fetchSearchMovies(query) {\n    const searchURL = `${BASE_URL}/search/movie?api_key=${key}&query=${query}&page=1`;\n    return fetchWithErrorHandling(searchURL);\n}\n\nexport function fetchMovieById(movieId) {\n    const searchByIdURL = `${BASE_URL}/movie/${movieId}?api_key=${key}`;\n    return fetchWithErrorHandling(searchByIdURL);    \n}\n\nexport function fetchMovieCastById(movieId) {\n    const searchCastByIdURL = `${BASE_URL}/movie/${movieId}/credits?api_key=${key}`;\n    return fetchWithErrorHandling(searchCastByIdURL);    \n}\n\nexport function fetchMovieReviewById(movieId) {\n    const searchReviewByIdURL = `${BASE_URL}/movie/${movieId}/reviews?api_key=${key}`;    \n    return fetchWithErrorHandling(searchReviewByIdURL);    \n}","import { useState, useEffect } from 'react';\nimport { Link, useSearchParams } from 'react-router-dom';\nimport * as movieAPI from '../services/movieAPI';\n\nexport default function MoviesPage() {\n  const [queryInput, setQueryInput] = useState('');\n  const [movies, setMovies] = useState(null);\n\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const handleQueryChange = event => {\n    setQueryInput(event.target.value);\n\n    if (event.target.value === '') {\n      setSearchParams({});\n      return;\n    }\n    setSearchParams({ query: event.target.value });   \n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    \n    movieAPI.fetchSearchMovies(queryInput).then(r => r.results).then(setMovies);\n    setQueryInput('');\n  }; \n  \n  useEffect(() => {\n    if (searchParams.get('query') !== null) {\n      const searchQuery = searchParams.get('query');\n      movieAPI.fetchSearchMovies(searchQuery).then(r => r.results).then(setMovies);      \n    }\n  }, [searchParams]);\n\n  return (  \n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          name=\"query\"\n          value={searchParams.get('query') === null ? '' : searchParams.get('query')}\n          onChange={handleQueryChange}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search movie\"\n        />\n        <button type=\"submit\">Search</button>\n      </form> \n      \n      {movies && (\n        <ul>\n          {movies.map(movie => (\n            <li key={movie.id}>\n              <Link to={`/movies/${movie.id}`}>{movie.title || movie.original_name}</Link>\n            </li>\n          ))}\n        </ul>\n      )} \n    </>\n  );\n}"],"names":["BASE_URL","key","fetchWithErrorHandling","url","config","fetch","response","ok","json","Promise","reject","Error","fetchTrendingMovies","fetchSearchMovies","query","fetchMovieById","movieId","fetchMovieCastById","fetchMovieReviewById","MoviesPage","useState","queryInput","setQueryInput","movies","setMovies","useSearchParams","searchParams","setSearchParams","useEffect","get","searchQuery","movieAPI","then","r","results","onSubmit","event","preventDefault","type","name","value","onChange","target","autoComplete","autoFocus","placeholder","map","movie","to","id","title","original_name"],"sourceRoot":""}